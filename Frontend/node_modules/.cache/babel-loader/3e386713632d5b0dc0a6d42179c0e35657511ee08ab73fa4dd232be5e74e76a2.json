{"ast":null,"code":"import axios from \"axios\";\nimport { loginUserFailed, loginUserRequest, loginUserSuccess } from \"./reducer\";\nexport const loginUser = (body, dispatch) => {\n  dispatch(loginUserRequest());\n  axios.post('http://localhost:3001/api/v1/user/login', body).then(res => getUser(res.data.body.token, dispatch)).catch(() => {\n    alert('un probleme rencontré lors de la connexion');\n    dispatch(loginUserFailed());\n  });\n};\nexport const getUser = (token, dispatch) => {\n  dispatch(loginUserRequest());\n  setTimeout(() => {\n    axios.post('http://localhost:3001/api/v1/user/profile', null, {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    }).then(res => {\n      const payload = {\n        user: res.data.body,\n        token\n      };\n      dispatch(loginUserSuccess(payload));\n    }).catch(() => {\n      alert('un probleme rencontré lors de la connexion');\n      dispatch(loginUserFailed());\n    });\n  }, 5000);\n};","map":{"version":3,"names":["axios","loginUserFailed","loginUserRequest","loginUserSuccess","loginUser","body","dispatch","post","then","res","getUser","data","token","catch","alert","setTimeout","headers","Authorization","payload","user"],"sources":["C:/Users/User/Desktop/OC Intégrateur Web/Projet 10/argentbank/Frontend/src/redux/action.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { loginUserFailed, loginUserRequest, loginUserSuccess } from \"./reducer\";\r\n\r\nexport const loginUser = (body, dispatch) => {\r\n    dispatch (loginUserRequest());\r\n    axios.post('http://localhost:3001/api/v1/user/login', body)\r\n    .then(res => getUser(res.data.body.token, dispatch))\r\n    .catch(() => {\r\n        alert('un probleme rencontré lors de la connexion');\r\n        dispatch(loginUserFailed());\r\n    })\r\n};\r\nexport const getUser = (token, dispatch) => {\r\n    dispatch (loginUserRequest());\r\n    setTimeout(() => {      \r\n    axios.post('http://localhost:3001/api/v1/user/profile', null, {headers: {Authorization: \"Bearer \" + token}})\r\n    .then(res=>{\r\n        const payload = {user: res.data.body, token};\r\n        dispatch(loginUserSuccess(payload));\r\n    })\r\n    .catch(() => {\r\n        alert('un probleme rencontré lors de la connexion');\r\n        dispatch(loginUserFailed());\r\n    })\r\n}, 5000);\r\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,eAAe,EAAEC,gBAAgB,EAAEC,gBAAgB,QAAQ,WAAW;AAE/E,OAAO,MAAMC,SAAS,GAAGA,CAACC,IAAI,EAAEC,QAAQ,KAAK;EACzCA,QAAQ,CAAEJ,gBAAgB,CAAC,CAAC,CAAC;EAC7BF,KAAK,CAACO,IAAI,CAAC,yCAAyC,EAAEF,IAAI,CAAC,CAC1DG,IAAI,CAACC,GAAG,IAAIC,OAAO,CAACD,GAAG,CAACE,IAAI,CAACN,IAAI,CAACO,KAAK,EAAEN,QAAQ,CAAC,CAAC,CACnDO,KAAK,CAAC,MAAM;IACTC,KAAK,CAAC,4CAA4C,CAAC;IACnDR,QAAQ,CAACL,eAAe,CAAC,CAAC,CAAC;EAC/B,CAAC,CAAC;AACN,CAAC;AACD,OAAO,MAAMS,OAAO,GAAGA,CAACE,KAAK,EAAEN,QAAQ,KAAK;EACxCA,QAAQ,CAAEJ,gBAAgB,CAAC,CAAC,CAAC;EAC7Ba,UAAU,CAAC,MAAM;IACjBf,KAAK,CAACO,IAAI,CAAC,2CAA2C,EAAE,IAAI,EAAE;MAACS,OAAO,EAAE;QAACC,aAAa,EAAE,SAAS,GAAGL;MAAK;IAAC,CAAC,CAAC,CAC3GJ,IAAI,CAACC,GAAG,IAAE;MACP,MAAMS,OAAO,GAAG;QAACC,IAAI,EAAEV,GAAG,CAACE,IAAI,CAACN,IAAI;QAAEO;MAAK,CAAC;MAC5CN,QAAQ,CAACH,gBAAgB,CAACe,OAAO,CAAC,CAAC;IACvC,CAAC,CAAC,CACDL,KAAK,CAAC,MAAM;MACTC,KAAK,CAAC,4CAA4C,CAAC;MACnDR,QAAQ,CAACL,eAAe,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC;EACN,CAAC,EAAE,IAAI,CAAC;AACR,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}