{"ast":null,"code":"import axios from \"axios\";\nimport { loginUserFailed, loginUserRequest, loginUserSuccess, logOut, updateUsernameFailed, updateUsernameRequest, updateUsernameSuccess } from \"./reducer\";\nexport const loginUser = async (body, dispatch) => {\n  dispatch(loginUserRequest());\n  try {\n    const res = await axios.post(\"http://localhost:3001/api/v1/user/login\", body);\n    if (body.rememberMe) {\n      localStorage.setItem(\"token\", res.data.body.token);\n    }\n    await getUser(res.data.body.token, dispatch);\n  } catch (error) {\n    console.error(\"Erreur lors de la connexion : \", error);\n    alert(\"Un problème a été rencontré lors de la connexion.\");\n    dispatch(loginUserFailed(error.message));\n  }\n};\nexport const registerUser = async (body, goToSignIn, clearLoading) => {\n  try {\n    await axios.post(\"http://localhost:3001/api/v1/user/signup\", body);\n    goToSignIn();\n    clearLoading();\n    alert('Utilisateur ajouté');\n  } catch (error) {\n    clearLoading();\n    alert(\"Un problème a été rencontré\");\n  }\n};\nexport const getUser = async (token, dispatch) => {\n  dispatch(loginUserRequest());\n  try {\n    const res = await axios.post(\"http://localhost:3001/api/v1/user/profile\", null, {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    });\n    const payload = {\n      user: res.data.body,\n      token\n    };\n    dispatch(loginUserSuccess(payload));\n    return res.data.body;\n  } catch (error) {\n    console.error(\"Erreur lors de la connexion : \", error);\n    alert(\"Un problème a été rencontré lors de la connexion.\");\n    dispatch(loginUserFailed(error.message));\n  }\n};\nexport const logOutUser = dispatch => {\n  localStorage.removeItem('token');\n  dispatch(logOut());\n};\nexport const updateUsername = (newUsername, token) => async dispatch => {\n  dispatch(updateUsernameRequest());\n  try {\n    await axios.put(\"http://localhost:3001/api/v1/user/profile\", {\n      userName: newUsername\n    }, {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    });\n    dispatch(updateUsernameSuccess({\n      userName: newUsername\n    }));\n  } catch (error) {\n    console.error(\"Erreur lors de la mise à jour du nom d'utilisateur : \", error);\n    dispatch(updateUsernameFailed(error.message));\n    alert(\"Un problème à été rencontré lors de la mise à jour du nom d'utilisateur.\");\n  }\n};","map":{"version":3,"names":["axios","loginUserFailed","loginUserRequest","loginUserSuccess","logOut","updateUsernameFailed","updateUsernameRequest","updateUsernameSuccess","loginUser","body","dispatch","res","post","rememberMe","localStorage","setItem","data","token","getUser","error","console","alert","message","registerUser","goToSignIn","clearLoading","headers","Authorization","payload","user","logOutUser","removeItem","updateUsername","newUsername","put","userName"],"sources":["C:/Users/User/Desktop/OC Intégrateur Web/Projet 10/argentbank/Frontend/src/redux/action.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { loginUserFailed, loginUserRequest, loginUserSuccess, logOut, updateUsernameFailed, updateUsernameRequest, updateUsernameSuccess } from \"./reducer\";\r\n\r\nexport const loginUser = async (body, dispatch) => {\r\n  dispatch(loginUserRequest());\r\n  try {\r\n    const res = await axios.post(\"http://localhost:3001/api/v1/user/login\", body);\r\n    if (body.rememberMe) {\r\n      localStorage.setItem(\"token\", res.data.body.token);\r\n    }\r\n    await getUser(res.data.body.token, dispatch);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la connexion : \", error);\r\n    alert(\"Un problème a été rencontré lors de la connexion.\");\r\n    dispatch(loginUserFailed(error.message));\r\n  }\r\n};\r\n\r\nexport const registerUser = async (body, goToSignIn, clearLoading) => {\r\n  try {\r\n    await axios.post(\"http://localhost:3001/api/v1/user/signup\", body);\r\n    goToSignIn();\r\n    clearLoading();\r\n    alert('Utilisateur ajouté');\r\n  } catch (error) {\r\n    clearLoading();\r\n    alert(\"Un problème a été rencontré\");\r\n  }\r\n};\r\n\r\nexport const getUser = async (token, dispatch) => {\r\n  dispatch(loginUserRequest());\r\n  try {\r\n    const res = await axios.post(\"http://localhost:3001/api/v1/user/profile\", null, {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    });\r\n    const payload = { user: res.data.body, token };\r\n    dispatch(loginUserSuccess(payload));\r\n    return res.data.body;\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la connexion : \", error);\r\n    alert(\"Un problème a été rencontré lors de la connexion.\");\r\n    dispatch(loginUserFailed(error.message));\r\n  }\r\n};\r\n\r\nexport const logOutUser = (dispatch) => {\r\n  localStorage.removeItem('token');\r\n  dispatch(logOut());\r\n}\r\n\r\nexport const updateUsername = (newUsername, token) => async (dispatch) => {\r\n  dispatch(updateUsernameRequest());\r\n  try {\r\n    await axios.put(\r\n      \"http://localhost:3001/api/v1/user/profile\", \r\n      { userName: newUsername }, \r\n      { headers: { Authorization: \"Bearer \" + token } }\r\n    );\r\n    dispatch(updateUsernameSuccess({ userName: newUsername }));\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la mise à jour du nom d'utilisateur : \", error);\r\n    dispatch(updateUsernameFailed(error.message));\r\n    alert(\"Un problème à été rencontré lors de la mise à jour du nom d'utilisateur.\");\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}