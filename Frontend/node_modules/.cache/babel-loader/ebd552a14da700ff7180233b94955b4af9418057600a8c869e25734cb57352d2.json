{"ast":null,"code":"import axios from \"axios\";\nimport { loginUserFailed, loginUserRequest, loginUserSuccess, logOut } from \"./reducer\";\nexport const loginUser = (body, dispatch) => {\n  dispatch(loginUserRequest());\n  return axios.post(\"http://localhost:3001/api/v1/user/login\", body).then(res => {\n    if (body.rememberMe) {\n      localStorage.setItem(\"token\", res.data.body.token);\n    }\n    getUser(res.data.body.token, dispatch);\n  }).catch(() => {\n    alert(\"Un problème a été rencontré lors de la connexion.\");\n    dispatch(loginUserFailed());\n  });\n};\nexport const getUser = (token, dispatch) => {\n  dispatch(loginUserRequest());\n  return axios.post(\"http://localhost:3001/api/v1/user/profile\", null, {\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  }).then(res => {\n    const payload = {\n      user: res.data.body,\n      token\n    };\n    dispatch(loginUserSuccess(payload));\n    return res.data.body;\n  }).catch(() => {\n    alert(\"Un problème a été rencontré lors de la connexion.\");\n    dispatch(loginUserFailed());\n  });\n};\nexport const logOutUser = dispatch => {\n  localStorage.removeItem('token');\n  dispatch(logOut());\n};","map":{"version":3,"names":["axios","loginUserFailed","loginUserRequest","loginUserSuccess","logOut","loginUser","body","dispatch","post","then","res","rememberMe","localStorage","setItem","data","token","getUser","catch","alert","headers","Authorization","payload","user","logOutUser","removeItem"],"sources":["C:/Users/User/Desktop/OC Intégrateur Web/Projet 10/argentbank/Frontend/src/redux/action.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { loginUserFailed, loginUserRequest, loginUserSuccess, logOut } from \"./reducer\";\r\n\r\nexport const loginUser = (body, dispatch) => {\r\n  dispatch(loginUserRequest());\r\n  return axios.post(\"http://localhost:3001/api/v1/user/login\", body)\r\n    .then((res) => {\r\n      if (body.rememberMe) {\r\n        localStorage.setItem(\"token\", res.data.body.token);\r\n      }\r\n      getUser(res.data.body.token, dispatch);\r\n    })\r\n    .catch(() => {\r\n      alert(\"Un problème a été rencontré lors de la connexion.\");\r\n      dispatch(loginUserFailed());\r\n    });\r\n};\r\nexport const getUser = (token, dispatch) => {\r\n  dispatch(loginUserRequest());\r\n  return axios.post(\"http://localhost:3001/api/v1/user/profile\", null, {\r\n      headers: { Authorization: \"Bearer \" + token },\r\n    })\r\n    .then((res) => {\r\n      const payload = { user: res.data.body, token };\r\n      dispatch(loginUserSuccess(payload));\r\n      return res.data.body;\r\n    })\r\n    .catch(() => {\r\n      alert(\"Un problème a été rencontré lors de la connexion.\");\r\n      dispatch(loginUserFailed());\r\n    });\r\n};\r\n\r\nexport const logOutUser = (dispatch) => {\r\n    localStorage.removeItem('token');\r\n    dispatch(logOut());\r\n}\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,eAAe,EAAEC,gBAAgB,EAAEC,gBAAgB,EAAEC,MAAM,QAAQ,WAAW;AAEvF,OAAO,MAAMC,SAAS,GAAGA,CAACC,IAAI,EAAEC,QAAQ,KAAK;EAC3CA,QAAQ,CAACL,gBAAgB,CAAC,CAAC,CAAC;EAC5B,OAAOF,KAAK,CAACQ,IAAI,CAAC,yCAAyC,EAAEF,IAAI,CAAC,CAC/DG,IAAI,CAAEC,GAAG,IAAK;IACb,IAAIJ,IAAI,CAACK,UAAU,EAAE;MACnBC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,GAAG,CAACI,IAAI,CAACR,IAAI,CAACS,KAAK,CAAC;IACpD;IACAC,OAAO,CAACN,GAAG,CAACI,IAAI,CAACR,IAAI,CAACS,KAAK,EAAER,QAAQ,CAAC;EACxC,CAAC,CAAC,CACDU,KAAK,CAAC,MAAM;IACXC,KAAK,CAAC,mDAAmD,CAAC;IAC1DX,QAAQ,CAACN,eAAe,CAAC,CAAC,CAAC;EAC7B,CAAC,CAAC;AACN,CAAC;AACD,OAAO,MAAMe,OAAO,GAAGA,CAACD,KAAK,EAAER,QAAQ,KAAK;EAC1CA,QAAQ,CAACL,gBAAgB,CAAC,CAAC,CAAC;EAC5B,OAAOF,KAAK,CAACQ,IAAI,CAAC,2CAA2C,EAAE,IAAI,EAAE;IACjEW,OAAO,EAAE;MAAEC,aAAa,EAAE,SAAS,GAAGL;IAAM;EAC9C,CAAC,CAAC,CACDN,IAAI,CAAEC,GAAG,IAAK;IACb,MAAMW,OAAO,GAAG;MAAEC,IAAI,EAAEZ,GAAG,CAACI,IAAI,CAACR,IAAI;MAAES;IAAM,CAAC;IAC9CR,QAAQ,CAACJ,gBAAgB,CAACkB,OAAO,CAAC,CAAC;IACnC,OAAOX,GAAG,CAACI,IAAI,CAACR,IAAI;EACtB,CAAC,CAAC,CACDW,KAAK,CAAC,MAAM;IACXC,KAAK,CAAC,mDAAmD,CAAC;IAC1DX,QAAQ,CAACN,eAAe,CAAC,CAAC,CAAC;EAC7B,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMsB,UAAU,GAAIhB,QAAQ,IAAK;EACpCK,YAAY,CAACY,UAAU,CAAC,OAAO,CAAC;EAChCjB,QAAQ,CAACH,MAAM,CAAC,CAAC,CAAC;AACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}